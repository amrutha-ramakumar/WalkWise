<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th = "https://www.thymeleaf.org/">

<head th:replace="~{fragments::head_sec}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
<header class="header-area header-style-1 header-height-2" th:replace="~{fragments::header-sec}">
</header>
<div th:replace="~{fragments::side-header}"></div>
<main class="main">
    <section class="home-slider position-relative pt-50">
        <div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Trade-in offer</h4>
                                <h2 class="animated fw-900">Supper value deals</h2>
                                <h1 class="animated fw-900 text-brand">On all products</h1>
                                <p class="animated">Save more with coupons & up to 70% off</p>
                                <a class="animated btn btn-brush btn-brush-3" th:href="@{/shops/0}" href="shop-product-right.html"> Shop Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-1" src="/shop/imgs/slider/slider-1.jpg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Hot promotions</h4>
                                <h2 class="animated fw-900">Fashion Trending</h2>
                                <h1 class="animated fw-900 text-7">Great Collection</h1>
                                <p class="animated">Save more with coupons & up to 20% off</p>
                                <a class="animated btn btn-brush btn-brush-2" th:href="@{/shops/0}" href="shop-product-right.html"> Discover Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-2" src="/shop/imgs/slider/slider-2.jpg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Upcoming Offer</h4>
                                <h2 class="animated fw-900">Big Deals From</h2>
                                <h1 class="animated fw-900 text-8">Manufacturer</h1>
                                <p class="animated">Sneakers, Boots, Sports</p>
                                <a class="animated btn btn-brush btn-brush-1" th:href="@{/shops/0}" href="shop-product-right.html"> Shop Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-3" src="/shop/imgs/slider/slider-3.jpg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-arrow hero-slider-1-arrow"></div>
    </section>
    <section class="featured section-padding position-relative">
        <div class="container">
            <H1>Popular Products</H1>
        </div>
    </section>
    <section class="product-tabs section-padding position-relative wow fadeIn animated">
        <div class="bg-square"> </div>

        <div class="container">

            <div class="tab-content wow fadeIn animated" id="myTabContent">
                <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                    <div class="row product-grid-4">
                        <div class="col-lg-3 col-md-4 col-12 col-sm-6" th:each="product :${products}">
                            <div class="product-cart-wrap mb-30">
                                <div class="product-img-action-wrap">
                                    <div class="product-img product-img-zoom">
                                        <a th:href="@{/product-details/{id}(id = ${product.id})}">
                                            <img class="default-img" th:src="@{|/imgs/images/${product.image[0].getName()}|}" alt="ProductImage">
                                            <img class="hover-img" th:src="@{|/imgs/images/${product.image[0].getName()}|}" alt="ProductImage">
                                        </a>
                                    </div>
                                    <div class="product-action-1">
                                        <a  class="action-btn hover-up" th:href="@{/addToWishList(productId=${product.id})}" ><i class="fi-rs-heart"></i></a>
                                        <a  class="action-btn hover-up" href="#"><i class="fi-rs-shuffle"></i></a>
                                    </div>
                                </div>
                                <div class="product-content-wrap">
                                    <div class="product-category">
                                        <a th:text = "${product.category.name}"></a>
                                    </div>
                                    <h2><a  th:text = "${product.name}"></a></h2>
                                    <div class="rating-result" title="90%">
                                            <span>
                                                <span>90%</span>
                                            </span>
                                    </div>
                                    <div class="product-price">
                                        <span th:unless="${product.salePrice > 0}">₹[(${product.costPrice})]</span>
                                        <span th:if="${product.salePrice > 0}">₹[(${product.salePrice})]</span>
                                        <span th:if="${product.salePrice > 0}" class="old-price">₹[(${product.costPrice})]</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!--End product-grid-4-->
                </div>
                <!--En tab one (Featured)-->
                <div class="tab-pane fade" id="tab-two" role="tabpanel" aria-labelledby="tab-two">
                    <div class="row product-grid-4">
                        <div class="col-lg-3 col-md-4 col-12 col-sm-6" >
                        </div>
                    </div>
                    <!--End product-grid-4-->
                </div>
                <!--En tab two (Popular)-->
                <div class="tab-pane fade" id="tab-three" role="tabpanel" aria-labelledby="tab-three">
                    <div class="row product-grid-4">
                        <div class="col-lg-3 col-md-4 col-12 col-sm-6" >

                        </div>
                    </div>
                    <!--End product-grid-4-->
                </div>
                <!--En tab three (New added)-->
            </div>
            <!--End tab-content-->
        </div>
    </section>
    <section class="banner-2 section-padding pb-0">
        <div class="container">

        </div>
    </section>

<!--    </section>-->
    <section class="popular-categories section-padding mt-15 mb-25">
        <div class="container wow fadeIn animated">
            <h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
            <div class="carausel-6-columns-cover position-relative">
                <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-arrows"></div>
                <div class="carausel-6-columns" id="carausel-6-columns">
                    <div class="card-1" th:each="category:${categories}">
                        <figure class=" img-hover-scale overflow-hidden">
                            <a  th:href="'/shop/category?categoryName=' + ${category.name}"><img src="/shop/imgs/shop/category-thumb-1.jpg" alt=""></a>
                        </figure>
                        <h5><a th:text="${category.name}"  th:href="'/shop/category?categoryName=' + ${category.name}"></a></h5>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="section-padding">
        <div class="container wow fadeIn animated">
<!--            <h3 class="section-title mb-20"><span>New</span> Arrivals</h3>-->
            <div >
                <div ></div>
                <div >
                    <div class="" th:each="product:${products}">

                    </div>
                    <!--End product-cart-wrap-2-->
                </div>
            </div>
        </div>
    </section>

</main>
<footer th:replace="~{fragments::footer-sec}"></footer>
<!-- Preloader Start -->
<div th:replace="~{fragments::pre-loader}"></div>
<!-- Vendor JS-->
<div th:replace="~{fragments::scripts}"></div>
<!-- Template  JS -->
<script>
    // Function to check if the user is blocked
    function checkUserStatus() {
        // Make an AJAX request to the server to check user status
        $.ajax({
            type: 'GET',
            url: '/checkUserStatus', // Endpoint to check user status (create this endpoint in your controller)
            success: function(response) {
                if (response.isBlocked) {
                    // User is blocked, perform logout action
                    window.location.href = '/logout'; // Redirect to logout endpoint
                }
            },
            error: function(xhr, status, error) {
                console.error('Error checking user status:', error);
            }
        });
    }

    // Call the function when the page is loaded
    $(document).ready(function() {
        checkUserStatus();
    });

</script>

</body>

</html>